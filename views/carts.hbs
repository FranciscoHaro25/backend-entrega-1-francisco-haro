<div class="d-flex justify-content-between align-items-center mb-4">
  <h1>Carritos de Compra</h1>
  <button class="btn btn-primary" onclick="createCart()">Crear Carrito</button>
</div>

{{#if carts.length}}
  <div class="row">
    {{#each carts}}
      <div class="col-md-6 mb-3">
        <div class="card">
          <div class="card-header">
            <h5>Carrito #{{this.id}}</h5>
          </div>
          <div class="card-body">
            {{#if this.products.length}}
              <p>Productos: {{this.products.length}}</p>
              <ul class="list-group list-group-flush">
                {{#each this.products}}
                  <li class="list-group-item d-flex justify-content-between">
                    <span>Producto ID: {{this.product}}</span>
                    <span class="badge bg-primary">Cantidad:
                      {{this.quantity}}</span>
                  </li>
                {{/each}}
              </ul>
            {{else}}
              <p class="text-muted">Carrito vac√≠o</p>
            {{/if}}
            <div class="mt-3">
              <a
                href="/carts/{{this.id}}"
                class="btn btn-outline-primary btn-sm"
              >Ver detalles</a>
            </div>
          </div>
        </div>
      </div>
    {{/each}}
  </div>
{{else}}
  <div class="alert alert-info">
    <h4>No hay carritos</h4>
    <p>Crea tu primer carrito de compras.</p>
  </div>
{{/if}}

<script>
  function createCart() { fetch('/api/carts', { method: 'POST', headers:
  {'Content-Type': 'application/json'} }) .then(response => response.json())
  .then(data => { alert('Carrito creado con ID: ' + data.id); location.reload();
  }) .catch(error => { alert('Error al crear carrito'); }); }
</script>